<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BOX SPORTS - Canlı Spor Yayını</title>

<!-- Favicon -->
<link rel="icon" href="https://hizliresim.com/2k46hi5" type="image/png" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L72XKZ22X2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-L72XKZ22X2');
</script>

<!-- HLS.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />

<style>
  /* --- GENEL --- */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Inter', sans-serif;
    margin: 0; padding: 0;
    background: #f4f8ff;
    color: #004080;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  a {
    color: #004080;
    text-decoration: none;
  }

  /* --- HEADER --- */
  header {
    display: flex;
    align-items: center;
    background: #0077cc;
    color: white;
    padding: 10px 20px;
    gap: 15px;
  }
  header .logo {
    width: 40px;
    height: 40px;
    object-fit: contain;
  }
  #header-title {
    font-weight: 700;
    font-size: 24px;
    flex-grow: 1;
  }
  button.theme-toggle {
    background: white;
    border: none;
    border-radius: 50%;
    padding: 6px;
    cursor: pointer;
    width: 36px; height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s ease;
    color: #0077cc;
  }
  button.theme-toggle:hover {
    background-color: #e0f0ff;
  }
  button.theme-toggle svg {
    stroke: #0077cc;
    width: 24px; height: 24px;
  }
  .clock {
    font-weight: 600;
    font-size: 16px;
    min-width: 70px;
    text-align: right;
  }

  /* --- ANA KISIM --- */
  main.container {
    flex: 1;
    display: flex;
    gap: 20px;
    padding: 20px;
  }

  /* Kanal Listesi */
  nav.channel-list {
    width: 280px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  #searchInput {
    padding: 8px;
    font-size: 14px;
    border-radius: 6px;
    border: 1px solid #aaa;
  }
  #filterCategory {
    padding: 8px;
    font-size: 14px;
    border-radius: 6px;
    border: 1px solid #aaa;
  }
  #channelContainer {
    flex: 1;
    overflow-y: auto;
    border: 1px solid #ddd;
    border-radius: 6px;
    background: white;
  }
  .channel {
    padding: 12px;
    border-bottom: 1px solid #eee;
    cursor: pointer;
    transition: background 0.3s;
  }
  .channel:hover, .channel.active {
    background: #cce5ff;
  }
  .channel-name {
    font-weight: 600;
    font-size: 16px;
  }
  .channel-category {
    font-size: 12px;
    color: #666;
  }

  /* Video oynatıcı */
  section.video-player {
    flex: 1;
    background: black;
    border-radius: 6px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  #video {
    width: 100%;
    height: 100%;
    max-height: 480px;
    background: black;
  }

  /* Footer */
  footer {
    padding: 12px 20px;
    background: #0077cc;
    color: white;
    text-align: center;
    font-weight: 600;
  }

  /* --- KARANLIK MOD --- */
  [data-theme="dark"] {
    background: #121212;
    color: #eee;
  }
  [data-theme="dark"] header {
    background: #005599;
  }
  [data-theme="dark"] nav.channel-list {
    background: #222;
  }
  [data-theme="dark"] #channelContainer {
    border-color: #444;
    background: #222;
  }
  [data-theme="dark"] .channel:hover, [data-theme="dark"] .channel.active {
    background: #004080;
  }
  [data-theme="dark"] #searchInput, [data-theme="dark"] #filterCategory {
    background: #333;
    color: #eee;
    border-color: #555;
  }
  [data-theme="dark"] section.video-player {
    background: #000;
  }
  [data-theme="dark"] footer {
    background: #005599;
  }
</style>

</head>
<body>

<header role="banner" aria-label="Sayfa Başlığı">
  <img class="logo" src="https://hizliresim.com/2k46hi5" alt="Box Sports Logo" title="Box Sports" />
  <span id="header-title">Box Sports</span>

  <button aria-label="Tema değiştirici" id="themeToggle" class="theme-toggle" title="Tema değiştir">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"/>
      <line x1="12" y1="1" x2="12" y2="3" />
      <line x1="12" y1="21" x2="12" y2="23" />
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
      <line x1="1" y1="12" x2="3" y2="12" />
      <line x1="21" y1="12" x2="23" y2="12" />
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
    </svg>
  </button>

  <div class="clock" id="clock" aria-live="polite" aria-atomic="true"></div>
</header>

<main class="container" role="main">
  <nav class="channel-list" aria-label="Kanal Listesi">
    <input type="text" id="searchInput" placeholder="Kanal Ara..." aria-label="Kanal Ara" />
    <select id="filterCategory" aria-label="Kategori Filtrele" title="Kategori Filtrele">
      <option value="all">Tüm Kategoriler</option>
    </select>
    <div id="channelContainer" tabindex="0" aria-live="polite" aria-atomic="true"></div>
  </nav>

  <section class="video-player" aria-label="Video Oynatıcı">
    <video id="video" controls autoplay playsinline></video>
  </section>
</main>

<footer>
  &copy; 2025 Box Sports | Tüm Hakları Saklıdır.
</footer>

<script>
"use strict";

let channels = [];
let filteredChannels = [];
let activeChannelId = null;

const video = document.getElementById('video');
const channelContainer = document.getElementById('channelContainer');
const searchInput = document.getElementById('searchInput');
const filterCategory = document.getElementById('filterCategory');
const themeToggle = document.getElementById('themeToggle');
const clock = document.getElementById('clock');

let hls = null;

// Tema fonksiyonları
function applyTheme(theme) {
  document.documentElement.setAttribute('data-theme', theme);
  localStorage.setItem('theme', theme);
  updateThemeIcon(theme);
}
function updateThemeIcon(theme) {
  if(theme === 'dark') {
    themeToggle.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="#ffd600">
        <circle cx="12" cy="12" r="5"/>
        <line x1="12" y1="1" x2="12" y2="3" />
        <line x1="12" y1="21" x2="12" y2="23" />
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
        <line x1="1" y1="12" x2="3" y2="12" />
        <line x1="21" y1="12" x2="23" y2="12" />
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
      </svg>
    `;
  } else {
    themeToggle.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="#0077cc">
        <circle cx="12" cy="12" r="5"/>
        <line x1="12" y1="1" x2="12" y2="3" />
        <line x1="12" y1="21" x2="12" y2="23" />
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
        <line x1="1" y1="12" x2="3" y2="12" />
        <line x1="21" y1="12" x2="23" y2="12" />
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
      </svg>
    `;
  }
}
themeToggle.addEventListener('click', () => {
  const currentTheme = document.documentElement.getAttribute('data-theme');
  if(currentTheme === 'dark') {
    applyTheme('light');
  } else {
    applyTheme('dark');
  }
});

// Saat fonksiyonu
function updateClock() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2,'0');
  const m = String(now.getMinutes()).padStart(2,'0');
  const s = String(now.getSeconds()).padStart(2,'0');
  clock.textContent = `${h}:${m}:${s}`;
}
setInterval(updateClock, 1000);
updateClock();

// Kanal verisi dinamik yükleme örneği (örnek kanal verisi kullanıldı)
async function loadChannels() {
  // Buraya gerçek kanal.json dosyasının URL'sini koyabilirsin
  // let response = await fetch('kanal.json');
  // channels = await response.json();

  // Örnek veri
  channels = [
    {id: 1, name: "BeIN Sports", category: "Futbol", url: "https://lll.istekbet3.tv/yayinzirve.m3u8"},
    {id: 2, name: "ESPN", category: "Basketbol", url: "https://example.com/stream2.m3u8"},
    {id: 3, name: "NBA TV", category: "Basketbol", url: "https://example.com/stream3.m3u8"},
    {id: 4, name: "F1 TV", category: "Formula 1", url: "https://example.com/stream4.m3u8"}
  ];

  populateCategoryFilter();
  filteredChannels = channels;
  renderChannelList(filteredChannels);
}

// Kategori filtre seçeneklerini oluştur
function populateCategoryFilter() {
  const categories = [...new Set(channels.map(c => c.category))].sort();
  filterCategory.innerHTML = '<option value="all">Tüm Kategoriler</option>';
  categories.forEach(cat => {
    const opt = document.createElement('option');
    opt.value = cat;
    opt.textContent = cat;
    filterCategory.appendChild(opt);
  });
}

// Kanal listesini render et
function renderChannelList(list) {
  channelContainer.innerHTML = '';
  if(list.length === 0) {
    channelContainer.textContent = 'Kanal bulunamadı.';
    return;
  }
  list.forEach(channel => {
    const div = document.createElement('div');
    div.className = 'channel';
    div.setAttribute('tabindex', '0');
    div.setAttribute('role', 'button');
    div.setAttribute('aria-pressed', activeChannelId === channel.id ? 'true' : 'false');
    div.innerHTML = `
      <div class="channel-name">${channel.name}</div>
      <div class="channel-category">${channel.category}</div>
    `;
    div.addEventListener('click', () => selectChannel(channel.id));
    div.addEventListener('keydown', e => {
      if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        selectChannel(channel.id);
      }
    });
    if(activeChannelId === channel.id) div.classList.add('active');
    channelContainer.appendChild(div);
  });
}

// Kanal seçimi ve video oynatma
function selectChannel(id) {
  if(activeChannelId === id) return; // Aynı kanal seçiliyse
  activeChannelId = id;
  const selected = channels.find(c => c.id === id);
  renderChannelList(filteredChannels);
  playStream(selected.url);
}

// HLS.js ile video oynatma
function playStream(url) {
  if(hls) {
    hls.destroy();
    hls = null;
  }
  if(Hls.isSupported()) {
    hls = new Hls();
    hls.loadSource(url);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED, function() {
      video.play();
    });
  } else if(video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = url;
    video.addEventListener('loadedmetadata', function() {
      video.play();
    });
  } else {
    alert('Tarayıcınız HLS akışını desteklemiyor.');
  }
}

// Arama ve filtreleme
searchInput.addEventListener('input', () => {
  filterAndRender();
});
filterCategory.addEventListener('change', () => {
  filterAndRender();
});
function filterAndRender() {
  const searchTerm = searchInput.value.toLowerCase();
  const category = filterCategory.value;
  filteredChannels = channels.filter(ch => {
    const matchName = ch.name.toLowerCase().includes(searchTerm);
    const matchCategory = (category === 'all') || (ch.category === category);
    return matchName && matchCategory;
  });
  renderChannelList(filteredChannels);
}

// Sayfa yüklendiğinde
window.addEventListener('load', () => {
  // Kayıtlı tema varsa uygula, yoksa sistem tercihini uygula
  const savedTheme = localStorage.getItem('theme');
  if(savedTheme) {
    applyTheme(savedTheme);
  } else {
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    applyTheme(prefersDark ? 'dark' : 'light');
  }
  loadChannels();
});

// Sağ tıklama engelleme ve F12 engelleme scriptleri
document.addEventListener('contextmenu', function (e) {
  e.preventDefault();
  window.location.href = '/404';  // 404 sayfasına yönlendirme
});
document.addEventListener('keydown', function (e) {
  if (e.key === 'F12') {
    e.preventDefault();
    window.location.href = '/404';
  }
});
document.onkeydown = function (e) {
  if (e.keyCode === 123) {  // F12 tuşu
    window.location.href = '/404';
    return false;
  }
};
</script>

</body>
</html>
