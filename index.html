<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Box Sports </title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<style>
  :root{
    --bg:#0f1b5a;
    --panel:#17265a;
    --accent:#1e4bd8;
    --muted:#a9c0ff;
    --card:#1f2e66;
    --live:#25c16f;
    --decl:#ff6b6b;
    --glass: rgba(255,255,255,0.03);
    --shadow: 0 6px 18px rgba(3,9,33,0.6);
    --radius:12px;
    color-scheme: dark;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  [data-theme="light"]{
    --bg:#e9f0ff;
    --panel:#ffffff;
    --accent:#0b57d0;
    --muted:#355089;
    --card:#f4f8ff;
    --live:#059669;
    --decl:#dc2626;
    --glass: rgba(0,0,0,0.03);
    --shadow: 0 8px 24px rgba(15,23,42,0.06);
    color-scheme: light;
  }

  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg), #0b1a4a 80%);font-size:15px}
  .app{
    display:grid;
    grid-template-rows:64px 1fr;
    gap:18px;
    height:100vh;
    padding:18px;
    box-sizing:border-box;
  }

  /* Header */
  header.app-header{
    display:flex;align-items:center;justify-content:space-between;
    gap:12px;padding:10px 18px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.02), transparent);
    box-shadow:var(--shadow);
    color:var(--muted);
  }
  .brand{display:flex;align-items:center;gap:12px}
  .logo{
    width:46px;height:46px;background:var(--accent);border-radius:8px;display:grid;place-items:center;font-weight:700;color:#fff;
    box-shadow:0 4px 12px rgba(9,30,92,0.35);
    transform:translateY(-1px);
  }
  .brand h1{margin:0;font-size:20px;color:var(--muted)}
  .controls{display:flex;align-items:center;gap:12px}

  .user-badge{background:var(--card);padding:8px 10px;border-radius:8px;color:var(--muted);display:flex;gap:10px;align-items:center}
  .theme-toggle{cursor:pointer;padding:6px;border-radius:8px;background:var(--glass);border:1px solid rgba(255,255,255,0.03)}
  .active-users{color:var(--muted);font-size:13px}

  /* Layout */
  .main{display:grid;grid-template-columns:320px 1fr;gap:18px;height:calc(100vh - 100px)}
  @media (max-width:900px){ .main{grid-template-columns:1fr;grid-auto-rows:minmax(240px,auto)} .left{order:2} .right{order:1} }

  /* Left panel */
  .left{
    background:var(--panel);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:12px;
  }
  .panel-title{font-weight:700;color:var(--muted);font-size:16px}
  .notice{
    background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    padding:14px;border-radius:10px;color:var(--muted);font-size:14px;line-height:1.4;
  }
  .controls-row{display:flex;gap:8px;align-items:center}
  .btn{
    background:var(--accent);border:none;color:white;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;
    box-shadow:0 6px 14px rgba(14,47,132,0.35);
  }
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);box-shadow:none}
  .filter{margin-left:auto;display:flex;gap:8px;align-items:center}
  .search{flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted)}

  .matches{overflow:auto;padding-right:6px;display:flex;flex-direction:column;gap:8px;margin-top:8px}
  .match{
    display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;background:var(--card);cursor:pointer;border:1px solid rgba(255,255,255,0.02);
    transition:transform .18s ease, box-shadow .18s ease;
  }
  .match:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(3,9,33,0.45)}
  .match .meta{flex:1}
  .match .teams{font-weight:700;color:var(--muted)}
  .match .info{font-size:13px;color:var(--muted);opacity:0.8}
  .badge{padding:6px 8px;border-radius:8px;font-weight:700;font-size:13px}
  .live{background:linear-gradient(90deg,var(--live), #14a86b);color:#052113}
  .soon{background:linear-gradient(90deg,#ffd166,#ffb703);color:#2b1600}
  .dead{background:var(--decl);color:#fff}

  /* Right - player */
  .right {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    border-radius: var(--radius);
    padding: 12px;
    box-shadow: var(--shadow);
    display: flex;
    flex-direction: column;
    gap: 12px;
    height: calc(100vh - 100px);
  }

  .player-wrap {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.35));
    border-radius: 10px;
    position: relative;
    overflow: hidden;
    min-height: 400px;
  }

  .player {
    width: 100%;
    height: 100%;
    background: #000;
    border-radius: 6px;
    display: grid;
    place-items: center;
    color: #fff;
  }

  .player video, .player iframe {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 6px;
    max-height: none;
  }

  .player-overlay {
    position: absolute;
    left: 0; top: 0; right: 0; bottom: 0;
    display: none; /* Oynat butonu gizlendi */
    align-items: center;
    justify-content: center;
    pointer-events: none;
  }

  .info-row{display:flex;justify-content:space-between;align-items:center;gap:12px}
  .stream-title{font-weight:800;color:var(--muted);font-size:18px}
  .meta-right{color:var(--muted);font-size:13px}

  /* empty state */
  .empty{
    display:grid;place-items:center;color:var(--muted);opacity:0.9;padding:20px;text-align:center;
  }

  footer.hint{color:var(--muted);font-size:13px;text-align:center;padding-top:6px}
  /* nice scrollbar */
  .matches::-webkit-scrollbar{width:8px}
  .matches::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.04);border-radius:8px}

</style>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>
<body>
<div class="app" id="app" data-theme="dark">
  <header class="app-header">
    <div class="brand">
      <div class="logo">BOX SPORTS</div>
      <div>
        <h1>Box Sports</h1>
        <div style="font-size:12px;color:var(--muted)">CanlÄ± spor yayÄ±nlarÄ±</div>
      </div>
    </div>

    <div class="controls">
      <div class="active-users">Aktif KullanÄ±cÄ±: <strong id="activeCount">1</strong></div>
      <div class="user-badge">
        <div style="width:28px;height:28px;border-radius:6px;background:var(--accent);display:grid;place-items:center;color:#fff;font-weight:700">E</div>
        <div style="font-size:13px;color:var(--muted)">BOX SPORTS</div>
      </div>
      <div class="theme-toggle" id="themeToggle" title="Gece / GÃ¼ndÃ¼z">ðŸŒž</div>
    </div>
  </header>

  <div class="main">
    <aside class="left">
      <div class="panel-title">CanlÄ± MaÃ§lar</div>

      <div class="notice" id="notice">
        Dosya okuma hatasÄ±! Bir sorun olursa <strong>@hatalisin</strong> telegram
      </div>

      <div class="controls-row">
        <button class="btn" id="refreshBtn">Yenile</button>
        <button class="btn secondary" id="onlyLiveBtn">Sadece LIVE</button>
        <input class="search" id="searchInput" placeholder="TakÄ±m ara..." />
      </div>

      <div class="matches" id="matchesList">
        <!-- maÃ§lar buraya eklenecek -->
      </div>

      <footer class="hint">TÄ±klayÄ±nca oynatÄ±cÄ±ya yÃ¼klenir. Live olanlara renkli rozet.</footer>

      <div style="margin-top:15px; font-size:14px; text-align:center; color:var(--muted);">
        Telegram kanalÄ±mÄ±za katÄ±lÄ±n: <a href="https://t.me/boxsportsx" target="_blank" style="color:var(--accent); font-weight:bold;">https://t.me/boxsportsx</a>
      </div>

    </aside>

    <section class="right">
      <div class="info-row">
        <div class="stream-title" id="streamTitle">BEIN SPORTS</div>
        <div class="meta-right" id="streamMeta">Durum: â€”</div>
      </div>

      <div class="player-wrap">
        <div class="player" id="player">
          <div class="empty" id="emptyState">
            <div>
              <div style="font-size:20px;font-weight:700;margin-bottom:8px">SeÃ§ili bir yayÄ±n yok</div>
              <div style="color:var(--muted)">Soldan bir maÃ§ seÃ§in veya "Yenile"ye tÄ±klayÄ±n</div>
            </div>
          </div>
          <!-- video / iframe placeholder -->
          <video id="videoEl" controls autoplay style="display:none"></video>
        </div>
        <div class="player-overlay">
          <button class="play-btn" id="bigPlayBtn" style="display:none">â–º Oynat</button>
        </div>
      </div>

      <div style="display:flex;gap:12px;align-items:center">
        <div style="flex:1;color:var(--muted)">Son iÅŸlem sÃ¼resi: <span id="lastTime">â€”</span></div>
        <div><button class="btn secondary" id="stopBtn">Durdur</button></div>
      </div>
    </section>
  </div>
</div>

<audio id="ding" src="data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAAAA..." preload="auto"></audio>

<script>
  // MaÃ§lar Ã¶rnek verisi
  const MOCK_MATCHES = [
    {
      id: 1,
      teams: "TRABZONSPOR  vs KOCAELÄ°",
      time: "CANLI",
      status: "live",
      src: "https://hlssssssssss.ssssssssssssssssssssss.workers.dev/https://corestream.corestream.lat/hls/bein-sports-1.m3u8"
    }
  ];

  const matchesEl = document.getElementById('matchesList');
  const notice = document.getElementById('notice');
  const lastTime = document.getElementById('lastTime');
  const streamTitle = document.getElementById('streamTitle');
  const streamMeta = document.getElementById('streamMeta');
  const videoEl = document.getElementById('videoEl');
  const emptyState = document.getElementById('emptyState');
  const bigPlayBtn = document.getElementById('bigPlayBtn');
  const ding = document.getElementById('ding');

  // SaÄŸÄ± tÄ±k ve geliÅŸtirici araÃ§ engelle
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('keydown', e => {
    if (e.key === 'F12' ||
        (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key.toUpperCase())) ||
        (e.ctrlKey && e.key === 'U')) {
      e.preventDefault();
      alert('GeliÅŸtirici araÃ§larÄ± engellendi.');
    }
  });

  // Ses efekti oynatma fonksiyonu
  function tryPlayDing() {
    if (!ding) return;
    ding.currentTime = 0;
    ding.play().catch(() => { });
  }

  // MaÃ§ listesini renderla
  function renderMatches(filter = '') {
    matchesEl.innerHTML = '';
    const onlyLive = document.getElementById('onlyLiveBtn').classList.contains('active');
    const q = document.getElementById('searchInput').value.trim().toLowerCase();

    const list = MOCK_MATCHES.filter(m => {
      if (onlyLive && m.status !== 'live') return false;
      if (q && !m.teams.toLowerCase().includes(q)) return false;
      return true;
    });

    if (list.length === 0) {
      matchesEl.innerHTML = '<div class="empty">GÃ¶rÃ¼ntÃ¼lenecek maÃ§ yok.</div>';
      return;
    }

    for (const m of list) {
      const item = document.createElement('div');
      item.className = 'match';
      item.dataset.id = m.id;
      item.innerHTML = `
        <div style="width:48px;height:48px;border-radius:8px;background:linear-gradient(180deg,#10183d, #18307a);display:grid;place-items:center;color:#fff;font-weight:700">
          ${m.id}
        </div>
        <div class="meta">
          <div class="teams">${escapeHtml(m.teams)}</div>
          <div class="info">${escapeHtml(m.time)} â€¢ ${m.status.toUpperCase()}</div>
        </div>
        <div>
          <div class="badge ${m.status === 'live' ? 'live' : (m.status === 'soon' ? 'soon' : 'dead')}">${m.status === 'live' ? 'LIVE' : (m.status === 'soon' ? 'SOON' : 'KAPANDI')}</div>
        </div>
      `;
      item.addEventListener('click', () => selectMatch(m));
      matchesEl.appendChild(item);
    }
  }

  function escapeHtml(s) {
    return String(s).replace(/[&<>"']/g, (c) => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[c]));
  }

  // MaÃ§ seÃ§ildiÄŸinde
  function selectMatch(m) {
    console.log('SeÃ§ilen maÃ§:', m);
    notice.style.display = 'none';
    streamTitle.textContent = m.teams;
    streamMeta.textContent = 'Durum: ' + m.status.toUpperCase();

    if (!m.src) {
      emptyState.style.display = 'grid';
      videoEl.style.display = 'none';
      bigPlayBtn.style.display = 'none';
      return;
    }

    emptyState.style.display = 'none';
    videoEl.style.display = 'block';

    if (window.hls) {
      window.hls.destroy();
      window.hls = null;
    }

    if (m.src.endsWith('.m3u8')) {
      if (Hls.isSupported()) {
        window.hls = new Hls();
        window.hls.loadSource(m.src);
        window.hls.attachMedia(videoEl);
        window.hls.on(Hls.Events.MANIFEST_PARSED, function () {
          videoEl.play().catch(() => { });
        });
      } else if (videoEl.canPlayType('application/vnd.apple.mpegurl')) {
        videoEl.src = m.src;
        videoEl.play().catch(() => { });
      } else {
        alert('TarayÄ±cÄ±nÄ±z HLS video oynatmayÄ± desteklemiyor.');
        return;
      }
    } else {
      videoEl.src = m.src;
      videoEl.play().catch(() => { });
    }

    // Oynat butonu gizlendi, otomatik oynatma var
    bigPlayBtn.style.display = 'none';

    if (m.status === 'live') {
      tryPlayDing();
    }

    lastTime.textContent = new Date().toLocaleTimeString();
  }

  // MaÃ§ listesini yÃ¼kle
  function loadMatches() {
    try {
      renderMatches();
      notice.style.display = 'none';
    } catch (e) {
      notice.style.display = 'block';
      notice.textContent = 'Dosya okuma hatasÄ±! Bir sorun olursa @hatalisin telegram.';
    }
  }

  // Sadece canlÄ± filtre dÃ¼ÄŸmesi
  document.getElementById('onlyLiveBtn').addEventListener('click', e => {
    e.target.classList.toggle('active');
    renderMatches();
  });

  // Arama inputu
  document.getElementById('searchInput').addEventListener('input', e => {
    renderMatches();
  });

  // Yenile butonu
  document.getElementById('refreshBtn').addEventListener('click', e => {
    loadMatches();
  });

  // Durdur butonu
  document.getElementById('stopBtn').addEventListener('click', e => {
    if (window.hls) {
      window.hls.destroy();
      window.hls = null;
    }
    videoEl.pause();
    videoEl.removeAttribute('src');
    videoEl.load();
    emptyState.style.display = 'grid';
    bigPlayBtn.style.display = 'none';
    streamTitle.textContent = 'BEIN SPORTS';
    streamMeta.textContent = 'Durum: â€”';
  });

  // Tema toggle
  const themeToggle = document.getElementById('themeToggle');
  themeToggle.addEventListener('click', e => {
    const app = document.getElementById('app');
    if (app.dataset.theme === 'dark') {
      app.dataset.theme = 'light';
      themeToggle.textContent = 'ðŸŒ™';
    } else {
      app.dataset.theme = 'dark';
      themeToggle.textContent = 'ðŸŒž';
    }
  });

  // Ä°lk yÃ¼kleme
  loadMatches();

</script>
</body>
</html>
